(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{372:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"wsl-wslconfig"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-wslconfig"}},[s._v("#")]),s._v(" wsl .wslconfig")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("외부서버접속위해서설정:\nhttps://velog.io/@bluejoyq/wsl-%EC%84%9C%EB%B2%84-%EC%99%B8%EB%B6%80-%EC%A0%91%EC%86%8D%ED%95%98%EA%B8%B0\n\n[wsl2]\nmemory=16GB\nprocessors=8\nswap=4GB\nlocalhostForwarding=true\n")])])]),t("h2",{attrs:{id:"wsl-setting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-setting"}},[s._v("#")]),s._v(" wsl setting")]),s._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cmd 관리자 권한으로 진행")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://linux.how2shout.com/how-to-install-default-ubuntu-22-04s-desktop-environment/")]),s._v("\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:VirtualMachinePlatform "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:Microsoft-Windows-Subsystem-Linux "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("norestart\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dism.exe /online /enable-feature /featurename:microsoft-hyper-v /all /norestart")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# information")]),s._v("\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get-featureinfo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:VirtualMachinePlatform\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get-featureinfo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:Microsoft-Windows-Subsystem-Linux\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dism.exe /online /get-featureinfo /featurename:microsoft-hyper-v-all")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# unregister")]),s._v("\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("disable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:VirtualMachinePlatform\ndism"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("online "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("disable-feature")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("featurename:Microsoft-Windows-Subsystem-Linux\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# dism.exe /online /disable-feature /featurename:microsoft-hyper-v-all")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# linux kernel setting")]),s._v("\nhttps:"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("microsoft"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com/ko-KR/windows/wsl/wsl2-kernel\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wsl version 설정")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set-default")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("version 2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### wsl 삭제 후 재설치")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://docs.microsoft.com/ko-kr/windows/wsl/install-manual")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-11-with-gui-support#1-overview")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# list")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("list "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("online\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d Ubuntu-20"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# version, install list")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v\n\nwsl\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# version 선택")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set-default")]),s._v(" Ubuntu-20"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# remove")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("unregister Ubuntu-20"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("04\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# enable systemd")]),s._v("\nsystemd\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/wsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\nsudo vi "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc/wsl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n"),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("[boot]")]),s._v("\nsystemd=true\n\nwsl "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("shutdown\n")])])]),t("h3",{attrs:{id:"wsl-default-user-ubuntu20-04는-ubuntu2004"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-default-user-ubuntu20-04는-ubuntu2004"}},[s._v("#")]),s._v(" wsl default-user (ubuntu20.04는 ubuntu2004)")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ubuntu config --default-user root\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root 로그인 후 비밀번호 변경")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" oseongryu\nubuntu config --default-user oseongryu\n")])])]),t("h3",{attrs:{id:"wsl-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-docker"}},[s._v("#")]),s._v(" wsl docker")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://netmarble.engineering/docker-on-wsl2-without-docker-desktop/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sSL")]),s._v(" get.docker.com "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo 권한설정")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sudo|wheel'")]),s._v(" /etc/group\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%sudo|%wheel'")]),s._v(" /etc/sudoers\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aG")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.profile\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'# set DOCKER_HOST for docker default context'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.profile\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wsl_ip=$(ip addr show eth0 | grep -oP \"(?<=inet\\s)\\d+(\\.\\d+){3}\")'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.profile\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'export DOCKER_HOST=tcp://$wsl_ip:2375'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" ~/.profile\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" update-alternatives "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--config")]),s._v(" iptables\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Press <enter> to keep the current choice[*], or type selection number: 1")]),s._v("\nwsl "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--shutdown")]),s._v("\n")])])]),t("h3",{attrs:{id:"wsl-docker-setting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-docker-setting"}},[s._v("#")]),s._v(" wsl docker setting")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Environment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("::GetEnvironmentVariable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DOCKER_HOST'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Machine'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Environment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("::SetEnvironmentVariable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'DOCKER_HOST'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tcp://localhost:2375'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Machine'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" 실행프로그램 연결\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/docker/daemon.json\n\n---/etc/docker/daemon.json\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hosts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fd://"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"unix:///var/run/docker.sock"')]),s._v(",\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tcp://0.0.0.0:2375"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n---\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /lib/systemd/system/docker.service\n\n---/lib/systemd/system/docker.service\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/dockerd "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--containerd")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/run/containerd/containerd.sock\n---\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker.service\n")])])]),t("h4",{attrs:{id:"wsl-백그라운드-실행-docker-mapping-작업-스케줄러에-추가하는-방식도-가능"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-백그라운드-실행-docker-mapping-작업-스케줄러에-추가하는-방식도-가능"}},[s._v("#")]),s._v(" wsl 백그라운드 실행 + docker mapping (작업 스케줄러에 추가하는 방식도 가능)")]),s._v(" "),t("div",{staticClass:"language-bat extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('@REM Windows 관리자 권한으로 bat로 실행\n@REM wsl 백그라운드에서 계속 실행중이어야 함\n@echo Starting dockerd in WSL ...\n@echo off\nfor /f "tokens=1" %%a in (\'wsl -d Ubuntu sh -c "hostname -I"\') do set wsl_ip=%%a\nnetsh interface portproxy add v4tov4 listenport=2375 connectport=2375 connectaddress=%wsl_ip%\npowershell.exe -Command "start-process wsl.exe -WindowStyle Hidden"\n')])])]),t("h4",{attrs:{id:"wsl-실행-확인-프로세스종료"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-실행-확인-프로세스종료"}},[s._v("#")]),s._v(" wsl 실행 확인 프로세스종료")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Get-Process "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Where-Object "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$_")]),s._v(".Name "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-like")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*wsl*'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nStop-Process "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ID")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9488")]),s._v("\n")])])]),t("h3",{attrs:{id:"wsl-temp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wsl-temp"}},[s._v("#")]),s._v(" wsl temp")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo service xrdp restart")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo systemctl enable --now xrdp")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo apt insatll xfce4-session")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# free -h")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget https://www.c-nergy.be/downloads/xrdp-installer-1.2.2.zip")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# unzip xrdp-installer-1.2.2.zip")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sh xrdp-installer-1.2.2.sh")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);